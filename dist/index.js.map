{"version":3,"sources":["../webpack/bootstrap","../external \"lodash\"",".././src/myinfo/fake/profiles/fake-profile.ts",".././src/myinfo/fake/profiles/mrSGDaddyPerfect.ts",".././src/myinfo/fake/profiles/childbirthRecords.ts",".././src/myinfo/helper/myinfo-request.ts",".././src/util/index.ts",".././src/util/JweUtil.ts",".././src/client/index.ts",".././src/myinfo/fake/profiles/fake-profiles.ts","../external \"moment\"",".././src/index.ts",".././src/myinfo/index.ts",".././src/myinfo/helper/index.ts",".././src/myinfo/helper/myinfo-helper.ts",".././src/util/ConfigUtils.ts",".././src/util/StringUtil.ts","../external \"is-base64\"",".././src/util/JestUtil.ts",".././src/util/SigningUtil.ts","../external \"node-apex-api-security\"","../external \"node-jose\"","../external \"axios-https-proxy-fix\"","../external \"url\"",".././src/util/RedactorUtil.ts",".././src/myinfo/fake/index.ts",".././src/myinfo/fake/fake-helper.ts",".././src/myinfo/fake/profiles/mrPRDaddyPerfect.ts",".././src/myinfo/fake/profiles/mrSGDaddyChildIsOld.ts",".././src/myinfo/fake/profiles/mrSGDaddyChildNone.ts",".././src/myinfo/fake/profiles/mrSGDaddyLongNames.ts",".././src/myinfo/fake/profiles/mrSGDaddyManyChildren.ts",".././src/myinfo/fake/profiles/mrSGPreschoolRegister.ts",".././src/myinfo/fake/profiles/mrSGDaddyMissingFields.ts",".././src/myinfo/fake/profiles/mrSGDaddyMissingUneditableFields.ts",".././src/myinfo/fake/profiles/mrPRDaddyOneChild.ts",".././src/myinfo/fake/profiles/mrsMYMommyPerfect.ts",".././src/myinfo/fake/profiles/mrsSGMommyPerfect.ts",".././src/myinfo/fake/profiles/mrMYDaddyPerfect.ts",".././src/myinfo/fake/fake-request.ts",".././src/singpass/index.ts",".././src/singpass/singpass-helper.ts","../external \"querystring\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","ProfileArchetype","_","MR_SG_DADDY_PERFECT","mrSGDaddyPerfect","id","generate","profileName","lastupdated","source","classification","isEmpty","hanyupinyinname","aliasname","hanyupinyinaliasname","marriedname","sex","race","secondaryrace","dialect","nationality","dob","birthcountry","residentialstatus","passportnumber","passportexpirydate","regadd","country","unit","street","block","postal","floor","building","mailadd","billadd","housingtype","hdbtype","ownerprivate","email","homeno","code","prefix","nbr","mobileno","marital","marriagecertno","countryofmarriage","marriagedate","divorcedate","childrenbirthrecords","tob","birthcertno","edulevel","gradyear","schoolname","desc","occupation","employment","workpassstatus","workpassexpirydate","householdincome","high","low","assessableincome","assessyear","cpfcontributions","cpfcontribution","date","amount","month","employer","cpfbalances","oa","ma","sa","ra","vehno","moment","formatDateToString","format","toString","childYoungest","child1MonthOld","subtract","child2MonthsOld","childMiddle1","childMiddle2","childMiddle3","childMiddle4","childMiddle5","childSuperOld","child6YearsOld","startOf","child7YearsOld","endOf","ChildrenRecords","util_1","client_1","MyInfoRequest","props","this","axiosClient","createClient","timeout","realm","appId","privateKeyContent","privateKeyPassword","uri","params","bearer","authHeader","SigningUtil","generateAuthorizationHeader","HttpMethod","GET","requestConfig","headers","Authorization","_a","sent","postForm","formData","POST","Cache-Control","Content-Type","post","ConfigUtils","StringUtil","JestUtil","JweUtil","jose","decryptJWE","jwe","decryptKey","Error","JWK","asKey","JWE","createDecrypt","algorithms","decrypt","verifyJWS","jws","verifyCert","jwsKey","JWS","createVerify","verify","axios_https_proxy_fix_1","url","RedactorUtil_1","proxyConfig","getProxyConfig","__assign","proxy","instance","default","addRequestLogs","addResponseLogs","proxyUrl","process","env","HTTPS_PROXY","https_proxy","HTTP_PROXY","http_proxy","parsed","parse","auth","split","username","password","host","hostname","port","parseInt","interceptors","request","use","log","method","redactNricfinInString","error","message","Promise","reject","response","config","optionalParams","_i","arguments","length","console","mrPRDaddyPerfect_1","mrSGDaddyChildIsOld_1","mrSGDaddyChildNone_1","mrSGDaddyLongNames_1","mrSGDaddyManyChildren_1","mrSGPreschoolRegister_1","mrSGDaddyMissingFields_1","mrSGDaddyMissingUneditableFields_1","mrPRDaddyOneChild_1","mrSGDaddyPerfect_1","mrsMYMommyPerfect_1","mrsSGMommyPerfect_1","mrMYDaddyPerfect_1","profiles","mrsSGMommyPerfect","mrPRDaddyPerfect","mrsMYMommyPerfect","mrSGDaddyChildNone","mrPRDaddyOneChild","mrSGDaddyChildIsOld","mrSGDaddyManyChildren","mrPreschoolRegister","mrSGDaddyLongNames","mrSGDaddyMissingFields","mrSGDaddyMissingUneditableFields","mrMYDaddyPerfect","MyInfo","Singpass","helper_1","Helper","MyInfoHelper","Request","Fake","__export","myinfo_request_1","JweUtil_1","_this","getPersonData","uinfin","__awaiter","personBasicURL","client_id","clientID","singpassEserviceId","singpassEserviceID","attributes","join","myInfoRequest","error_1","encryptedPersonJWE","data","keyToDecryptJWE","undefined","personData","JSON","payload","error_2","requestProps","apexSigningURL","apexPrivateCert","apexPrivateCertPass","displayWarnings","getValueFromEnv","defaultValue","trim","warn","disableMissingEnvWarnings","getValueFromEnvWithoutWarn","getIntValueFromEnv","stringValue","intValue","isNaN","getBooleanValueFromEnv","isBase64","replaceLineBreaks","input","replace","isBase64Valid","test","paddingRequired","isTest","global","describe","it","node_apex_api_security_1","authPrefix","httpMethod","formJson","nonce","timestamp","eURL","rsaHeader","ApiSigningUtil","getSignatureToken","urlPath","keyString","passphrase","queryString","indexOfNric","getIndexOfNricInString","nric","substr","redactedNric","redactNricfin","nricfin","isValidNricfin","firstThreeDigits","substring","exec","result","index","fake_helper_1","FakeMyInfoHelper","fake_request_1","FakeMyInfoRequest","fake_profile_1","fake_profiles_1","mockParams","mockProfile","find","profile","archetype","person","attrs","myinfoPerson","occupationfreeform","Set","toPairs","filter","k","has","reduce","accumulator","v","_b","MR_PR_DADDY_PERFECT","childbirthRecords_1","MR_SG_DADDY_CHILD_IS_OLD","MR_SG_DADDY_CHILD_NONE","MR_SG_DADDY_LONG_NAMES","longName","values","MR_SG_DADDY_MANY_CHILDREN","MR_SG_PRESCHOOL_CHILDREN","c1","c2","c3","c4","c5","c6","MR_SG_DADDY_MISSING_FIELDS","slice","MR_SG_DADDY_MISSING_UNEDITABLE_FIELDS","MR_PR_DADDY_ONE_CHILD","MRS_MY_MOMMY_PERFECT","MRS_SG_MOMMY_PERFECT","MR_MY_DADDY_PERFECT","expectedResponse","SessionRefreshResult","SessionLogoutResult","querystringUtil","OidcHelper","SINGPASS_SESSION_COOKIE_NAME","constructAuthorizationUrl","state","queryParams","redirect_uri","redirectUri","scope","response_type","stringify","authorizationUrl","getTokens","authCode","axiosRequestConfig","grant_type","client_secret","clientSecret","body","content-type","tokenUrl","id_token","_testExports","singpassClient","logoutUrl","jweDecryptKey","jwsVerifyKey","getIdTokenPayload","tokens","decryptedJwe","jwsPayload","verifiedJws","e_1","extractNricAndUuidFromPayload","sub","matchResult","match","uuid","refreshSession","sessionId","Cookie","res","responseUrl","includes","INVALID_SESSION_ID","SUCCESS","e_2","SINGPASS_ERROR","logoutOfSession","e_3"],"mappings":"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UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,UACTC,SAAY,gCAEb,CACCH,KAAQ,aACRC,OAAU,SACVC,MAAS,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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = require(\"lodash\");","import { Person } from \"../../domain\";\n\nexport interface FakeProfile {\n\tid: string;\n\tname: ProfileArchetype;\n\tgenerate: (profileName?: string) => Person;\n}\n\n/**\n * Used in MyInfo.Fake.Helper.getPersonData to get a archetype person\n */\nexport enum ProfileArchetype {\n\tMR_PR_DADDY_ONE_CHILD = \"Mr PR Daddy with One Child\",\n\tMR_PR_DADDY_PERFECT = \"Mr PR Daddy Perfect\",\n\tMR_SG_DADDY_CHILD_IS_OLD = \"Mr SG with 1 old child\",\n\tMR_SG_DADDY_CHILD_NONE = \"Mr SG with no children\",\n\tMR_SG_DADDY_LONG_NAMES = \"Mr SG daddy with long names\",\n\tMR_SG_DADDY_MANY_CHILDREN = \"Mr SG with many children\",\n\tMR_SG_DADDY_MISSING_FIELDS = \"Mr SG Daddy Missing Fields\",\n\tMR_SG_DADDY_MISSING_UNEDITABLE_FIELDS = \"Mr SG Daddy Missing Uneditable Fields\",\n\tMR_SG_DADDY_PERFECT = \"Mr SG Daddy Perfect\",\n\tMR_SG_PRESCHOOL_CHILDREN = \"Mr SG Preschool Children\",\n\tMRS_MY_MOMMY_PERFECT = \"Mrs MY Mommy Perfect\",\n\tMRS_SG_MOMMY_PERFECT = \"Mrs SG Mommy Perfect\",\n\tMR_MY_DADDY_PERFECT = \"Mr MY Daddy Perfect\",\n}\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\n\n\nconst id = \"S8399420G\";\nconst name = ProfileArchetype.MR_SG_DADDY_PERFECT;\n\nexport const mrSGDaddyPerfect: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\treturn {\n\t\t\t\"name\": {\n\t\t\t\t\"lastupdated\": \"2015-06-01\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": profileName,\n\t\t\t},\n\t\t\t\"hanyupinyinname\": {\n\t\t\t\t\"lastupdated\": \"2015-06-01\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"CHEN XIAO HUI\",\n\t\t\t},\n\t\t\t\"aliasname\": {\n\t\t\t\t\"lastupdated\": \"2015-06-01\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"TRICIA TAN XIAO HUI\",\n\t\t\t},\n\t\t\t\"hanyupinyinaliasname\": {\n\t\t\t\t\"lastupdated\": \"2015-06-01\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"IUH OAIX NAT AICIRT\",\n\t\t\t},\n\t\t\t\"marriedname\": {\n\t\t\t\t\"lastupdated\": \"2015-06-01\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"\",\n\t\t\t},\n\t\t\t\"sex\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"M\",\n\t\t\t},\n\t\t\t\"race\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"CN\",\n\t\t\t},\n\t\t\t\"secondaryrace\": {\n\t\t\t\t\"lastupdated\": \"2017-08-25\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"EU\",\n\t\t\t},\n\t\t\t\"dialect\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"SG\",\n\t\t\t},\n\t\t\t\"nationality\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"SG\",\n\t\t\t},\n\t\t\t\"dob\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"1983-05-17\",\n\t\t\t},\n\t\t\t\"birthcountry\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"SG\",\n\t\t\t},\n\t\t\t\"residentialstatus\": {\n\t\t\t\t\"lastupdated\": \"2017-08-25\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"C\",\n\t\t\t},\n\t\t\t\"passportnumber\": {\n\t\t\t\t\"lastupdated\": \"2017-08-25\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"E35463874W\",\n\t\t\t},\n\t\t\t\"passportexpirydate\": {\n\t\t\t\t\"lastupdated\": \"2017-08-25\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"2020-01-01\",\n\t\t\t},\n\t\t\t\"regadd\": {\n\t\t\t\t\"country\": \"SG\",\n\t\t\t\t\"unit\": \"128\",\n\t\t\t\t\"street\": \"BEDOK NORTH AVENUE 1\",\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"block\": \"548\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"postal\": \"460548\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"floor\": \"09\",\n\t\t\t\t\"building\": \"\",\n\t\t\t},\n\t\t\t\"mailadd\": {\n\t\t\t\t\"country\": \"SG\",\n\t\t\t\t\"unit\": \"128\",\n\t\t\t\t\"street\": \"BEDOK NORTH AVENUE 1\",\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"block\": \"548\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"postal\": \"460548\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"floor\": \"09\",\n\t\t\t\t\"building\": \"\",\n\t\t\t},\n\t\t\t\"billadd\": {\n\t\t\t\t\"country\": \"SG\",\n\t\t\t\t\"unit\": \"\",\n\t\t\t\t\"street\": \"\",\n\t\t\t\t\"lastupdated\": \"\",\n\t\t\t\t\"block\": \"\",\n\t\t\t\t\"source\": \"\",\n\t\t\t\t\"postal\": \"\",\n\t\t\t\t\"classification\": \"\",\n\t\t\t\t\"floor\": \"\",\n\t\t\t\t\"building\": \"\",\n\t\t\t},\n\t\t\t\"housingtype\": {\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"\",\n\t\t\t},\n\t\t\t\"hdbtype\": {\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"116\",\n\t\t\t},\n\t\t\t\"ownerprivate\": {\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"N\",\n\t\t\t},\n\t\t\t\"email\": {\n\t\t\t\t\"lastupdated\": \"2017-12-13\",\n\t\t\t\t\"source\": \"4\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"test@gmail.com\",\n\t\t\t},\n\t\t\t\"homeno\": {\n\t\t\t\t\"code\": \"65\",\n\t\t\t\t\"prefix\": \"+\",\n\t\t\t\t\"lastupdated\": \"2017-11-20\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"nbr\": \"83416847\",\n\t\t\t},\n\t\t\t\"mobileno\": {\n\t\t\t\t\"code\": \"65\",\n\t\t\t\t\"prefix\": \"+\",\n\t\t\t\t\"lastupdated\": \"2017-12-13\",\n\t\t\t\t\"source\": \"4\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"nbr\": \"83416847\",\n\t\t\t},\n\t\t\t\"marital\": {\n\t\t\t\t\"lastupdated\": \"2017-03-29\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"2\",\n\t\t\t},\n\t\t\t\"marriagecertno\": {\n\t\t\t\t\"lastupdated\": \"2018-03-02\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"M1234\",\n\t\t\t},\n\t\t\t\"countryofmarriage\": {\n\t\t\t\t\"lastupdated\": \"2018-03-02\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"SG\",\n\t\t\t},\n\t\t\t\"marriagedate\": {\n\t\t\t\t\"lastupdated\": \"\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"2017-01-03\",\n\t\t\t},\n\t\t\t\"divorcedate\": {\n\t\t\t\t\"lastupdated\": \"\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"\",\n\t\t\t},\n\t\t\t\"childrenbirthrecords\": [\n\t\t\t\t{\n\t\t\t\t\t\"dialect\": \"HK\",\n\t\t\t\t\t\"race\": \"CN\",\n\t\t\t\t\t\"tob\": \"0901\",\n\t\t\t\t\t\"sex\": \"F\",\n\t\t\t\t\t\"source\": \"1\",\n\t\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\t\"birthcertno\": \"S5562882C\",\n\t\t\t\t\t\"hanyupinyinname\": \"Cheng Pei Ni\",\n\t\t\t\t\t\"hanyupinyinaliasname\": \"\",\n\t\t\t\t\t\"marriedname\": \"\",\n\t\t\t\t\t\"aliasname\": \"\",\n\t\t\t\t\t\"dob\": \"2011-09-10\",\n\t\t\t\t\t\"name\": \"Jo Tan Pei Ni\",\n\t\t\t\t\t\"lastupdated\": \"2018-05-16\",\n\t\t\t\t\t\"secondaryrace\": \"\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"dialect\": \"HK\",\n\t\t\t\t\t\"race\": \"CN\",\n\t\t\t\t\t\"tob\": \"2021\",\n\t\t\t\t\t\"sex\": \"F\",\n\t\t\t\t\t\"source\": \"1\",\n\t\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\t\"birthcertno\": \"S8816582I\",\n\t\t\t\t\t\"hanyupinyinname\": \"Cheng Wei Ling\",\n\t\t\t\t\t\"hanyupinyinaliasname\": \"\",\n\t\t\t\t\t\"marriedname\": \"\",\n\t\t\t\t\t\"aliasname\": \"\",\n\t\t\t\t\t\"dob\": \"2015-07-18\",\n\t\t\t\t\t\"name\": \"Joyce Tan Wei Ling\",\n\t\t\t\t\t\"lastupdated\": \"2018-05-16\",\n\t\t\t\t\t\"secondaryrace\": \"\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"dialect\": \"HK\",\n\t\t\t\t\t\"race\": \"CN\",\n\t\t\t\t\t\"tob\": \"0901\",\n\t\t\t\t\t\"sex\": \"F\",\n\t\t\t\t\t\"source\": \"1\",\n\t\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\t\"birthcertno\": \"T0202564C\",\n\t\t\t\t\t\"hanyupinyinname\": \"Cheng Shu Hui\",\n\t\t\t\t\t\"hanyupinyinaliasname\": \"\",\n\t\t\t\t\t\"marriedname\": \"\",\n\t\t\t\t\t\"aliasname\": \"\",\n\t\t\t\t\t\"dob\": \"2012-09-10\",\n\t\t\t\t\t\"name\": \"Joycelyn Tan Shu Hui\",\n\t\t\t\t\t\"lastupdated\": \"2018-05-16\",\n\t\t\t\t\t\"secondaryrace\": \"\",\n\t\t\t\t},\n\t\t\t],\n\t\t\t\"edulevel\": {\n\t\t\t\t\"lastupdated\": \"2017-10-11\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"9\",\n\t\t\t},\n\t\t\t\"gradyear\": {\n\t\t\t\t\"lastupdated\": \"2017-10-11\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"1998\",\n\t\t\t},\n\t\t\t\"schoolname\": {\n\t\t\t\t\"lastupdated\": \"2017-10-11\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"T07GS3011J\",\n\t\t\t\t\"desc\": \"SIGLAP SECONDARY SCHOOL\",\n\t\t\t},\n\t\t\t\"occupation\": {\n\t\t\t\t\"lastupdated\": \"2017-10-11\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"53201\",\n\t\t\t\t\"desc\": \"HEALTHCARE ASSISTANT\",\n\t\t\t},\n\t\t\t\"employment\": {\n\t\t\t\t\"lastupdated\": \"2017-10-11\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"ALPHA\",\n\t\t\t},\n\t\t\t\"workpassstatus\": {\n\t\t\t\t\"lastupdated\": \"2018-03-02\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"Live\",\n\t\t\t},\n\t\t\t\"workpassexpirydate\": {\n\t\t\t\t\"lastupdated\": \"2018-03-02\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"2018-12-31\",\n\t\t\t},\n\t\t\t\"householdincome\": {\n\t\t\t\t\"high\": \"5999\",\n\t\t\t\t\"low\": \"5000\",\n\t\t\t\t\"lastupdated\": \"2017-10-24\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t},\n\t\t\t\"assessableincome\": {\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"1456789.00\",\n\t\t\t},\n\t\t\t\"assessyear\": {\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"2015\",\n\t\t\t},\n\t\t\t\"cpfcontributions\": {\n\t\t\t\t\"cpfcontribution\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2016-12-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2016-11\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2016-12-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2016-12\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2016-12-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2016-12\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-01-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2016-12\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-01-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-01\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-01-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-01\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-02-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-01\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-02-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-02\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-02-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-02\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-03-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-02\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-03-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-03\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-03-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-03\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-04-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-03\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-04-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-04\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-04-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-04\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-05-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-04\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-05-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-05\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-05-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-05\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-06-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-05\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-06-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-06\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-06-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-06\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-07-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-06\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-07-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-07\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-07-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-07\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-08-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-07\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-08-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-08\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-08-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-08\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-09-01\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-08\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-09-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-09\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-09-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-09\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-10-01\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-09\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-10-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-10\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-10-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-10\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-11-01\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-10\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-11-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-11\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-11-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-11\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-12-01\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-11\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-12-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-12\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-12-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-12\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2018-01-01\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-12\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2018-01-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2018-01\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2018-01-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2018-01\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t},\n\t\t\t\"cpfbalances\": {\n\t\t\t\t\"oa\": \"1581.48\",\n\t\t\t\t\"ma\": \"11470.70\",\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"sa\": \"21967.09\",\n\t\t\t\t\"ra\": \"51967.09\",\n\t\t\t},\n\t\t\t\"vehno\": {\n\t\t\t\t\"lastupdated\": \"\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"\",\n\t\t\t},\n\t\t};\n\t},\n};\n","import { ChildBirthRecord } from \"../../domain\";\nimport * as moment from \"moment\";\n\nconst formatDateToString = (date?: moment.Moment): string => {\n\tif (date) {\n\t\treturn date.format(\"YYYY-MM-DD\").toString();\n\t}\n\treturn moment().format(\"YYYY-MM-DD\").toString();\n};\n\nconst childYoungest = {\n\tbirthcertno: \"T1828432J\",\n\tname: \"Youngest Tan Ke Xuan\",\n\tdob: formatDateToString(),\n} as ChildBirthRecord;\n\nconst child1MonthOld = {\n\tbirthcertno: \"T4383608G\",\n\tname: \"1 Month Tan Ke Yu\",\n\tdob: formatDateToString(moment().subtract(1, \"months\")),\n} as ChildBirthRecord;\n\nconst child2MonthsOld = {\n\tbirthcertno: \"T7153144E\",\n\tname: \"2 Months Tan Keh Guan\",\n\tdob: formatDateToString(moment().subtract(2, \"months\")),\n} as ChildBirthRecord;\n\nconst childMiddle1 = {\n\tbirthcertno: \"T1694727F\",\n\tname: \"Middle Tan Twin1\",\n\tdob: formatDateToString(moment().subtract(2, \"years\")),\n} as ChildBirthRecord;\n\nconst childMiddle2 = {\n\tbirthcertno: \"T1669632Z\",\n\tname: \"Middle Tan Twin2\",\n\tdob: formatDateToString(moment().subtract(2, \"years\")),\n} as ChildBirthRecord;\n\nconst childMiddle3 = {\n\tbirthcertno: \"T1509027D\",\n\tname: \"Tan Boy\",\n\tdob: formatDateToString(moment().subtract(3, \"years\")),\n} as ChildBirthRecord;\n\nconst childMiddle4 = {\n\tbirthcertno: \"T1422931G\",\n\tname: \"Tan Girl\",\n\tdob: formatDateToString(moment().subtract(4, \"years\")),\n} as ChildBirthRecord;\n\nconst childMiddle5 = {\n\tbirthcertno: \"T1511326F\",\n\tname: \"Tan Girl Younger\",\n\tdob: formatDateToString(moment().subtract(5, \"years\")),\n} as ChildBirthRecord;\n\nconst childSuperOld = {\n\tbirthcertno: \"T0050832I\",\n\tname: \"Super Old Tan Ke Wei\",\n\tdob: formatDateToString(moment().subtract(8, \"years\")),\n} as ChildBirthRecord;\n\nconst child6YearsOld = {\n\tbirthcertno: \"T1364674G\",\n\tname: \"Turning 6 Tan Kid born Jan 1st\",\n\tdob: formatDateToString(moment().subtract(6, \"years\").startOf(\"year\")),\n} as ChildBirthRecord;\n\nconst child7YearsOld = {\n\tbirthcertno: \"T1210114C\",\n\tname: \"Turning 7 Tan Kid born Dec 31\",\n\tdob: formatDateToString(moment().subtract(7, \"years\").endOf(\"year\")),\n} as ChildBirthRecord;\n\nexport const ChildrenRecords = {\n\tchildYoungest,\n\tchild1MonthOld,\n\tchild2MonthsOld,\n\tchildMiddle1,\n\tchildMiddle2,\n\tchildMiddle3,\n\tchildMiddle4,\n\tchildMiddle5,\n\tchildSuperOld,\n\tchild6YearsOld,\n\tchild7YearsOld,\n};\n","\nimport { AxiosInstance, AxiosRequestConfig, AxiosResponse } from \"axios-https-proxy-fix\";\nimport { SigningUtil } from \"../../util\";\nimport { createClient } from \"../../client\";\n\nconst AUTH_PREFIX = \"apex_l2_eg\";\nconst TIMEOUT = 20000;\n\nexport interface MyInfoRequestConstructor {\n\trealm: string;\n\tappId: string;\n\tprivateKeyContent: string;\n\tprivateKeyPassword: string;\n}\n\n/**\n * Expose a request class for MyInfo endpoints other than those defined in MyInfoHelper\n */\n\nexport class MyInfoRequest {\n\tprivate readonly axiosClient: AxiosInstance;\n\tprivate readonly realm: string;\n\tprivate readonly appId: string;\n\tprivate readonly privateKeyContent: string;\n\tprivate readonly privateKeyPassword: string;\n\n\tconstructor(props: MyInfoRequestConstructor) {\n\t\tthis.axiosClient = createClient({\n\t\t\ttimeout: 10000,\n\t\t});\n\t\tthis.realm = props.realm;\n\t\tthis.appId = props.appId;\n\t\tthis.privateKeyContent = props.privateKeyContent;\n\t\tthis.privateKeyPassword = props.privateKeyPassword;\n\t}\n\n\tpublic async get(\n\t\turi: string,\n\t\tparams?: { [key: string]: any },\n\t\tbearer?: string,\n\t): Promise<AxiosResponse> {\n\t\tconst authHeader = SigningUtil.generateAuthorizationHeader(\n\t\t\tthis.realm,\n\t\t\tAUTH_PREFIX,\n\t\t\tSigningUtil.HttpMethod.GET,\n\t\t\turi,\n\t\t\tthis.appId,\n\t\t\tparams,\n\t\t\tthis.privateKeyContent,\n\t\t\tthis.privateKeyPassword,\n\t\t\tbearer,\n\t\t);\n\n\t\tconst requestConfig: AxiosRequestConfig = {\n\t\t\tparams,\n\t\t\theaders: {\n\t\t\t\tAuthorization: authHeader,\n\t\t\t},\n\t\t};\n\n\t\tconst response = await this.axiosClient.get(uri, requestConfig);\n\n\t\treturn response;\n\t}\n\n\tpublic async postForm(\n\t\turi: string,\n\t\tformData?: { [key: string]: any },\n\t\tbearer?: string,\n\t): Promise<AxiosResponse> {\n\t\tconst authHeader = SigningUtil.generateAuthorizationHeader(\n\t\t\tthis.realm,\n\t\t\tAUTH_PREFIX,\n\t\t\tSigningUtil.HttpMethod.POST,\n\t\t\turi,\n\t\t\tthis.appId,\n\t\t\tformData,\n\t\t\tthis.privateKeyContent,\n\t\t\tthis.privateKeyPassword,\n\t\t\tbearer,\n\t\t);\n\n\t\tconst requestConfig: AxiosRequestConfig = {\n\t\t\theaders: {\n\t\t\t\t\"Authorization\": authHeader,\n\t\t\t\t\"Cache-Control\": \"no-cache\",\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t},\n\t\t};\n\n\t\tconst response = await this.axiosClient.post(uri, formData, requestConfig);\n\n\t\treturn response;\n\t}\n}\n","import * as ConfigUtils from \"./ConfigUtils\";\nimport * as StringUtil from \"./StringUtil\";\nimport * as JestUtil from \"./JestUtil\";\nimport * as SigningUtil from \"./SigningUtil\";\nimport * as JweUtil from \"./JweUtil\";\n\nexport { ConfigUtils, StringUtil, JestUtil, SigningUtil, JweUtil };\n","import * as jose from \"node-jose\";\n\ninterface JWT {\n\theader:\n\t{\n\t\talg: string;\n\t\tenc: string;\n\t\tkid: string;\n\t\tcty: string;\n\t};\n\tprotected: string[];\n\tpayload: Buffer;\n}\n\nexport interface JWE extends JWT {\n\tplaintext: Buffer;\n}\n\nexport interface JWS extends JWT {\n\tsignature: Buffer;\n}\n\nexport async function decryptJWE(jwe: string, decryptKey: string): Promise<JWE> {\n\tif (!jwe) throw new Error(\"Missing JWE data.\");\n\tif (!decryptKey) throw new Error(\"Missing key to decrypt JWE payload.\");\n\t// TODO: can be further optimized by caching key in memory instead of regenerating each time\n\tconst key = await jose.JWK.asKey(decryptKey, \"pem\");\n\n\t// allow all supported algorithms\n\treturn jose.JWE.createDecrypt(key, { algorithms: [\"*\"] }).decrypt(jwe);\n}\n\nexport async function verifyJWS(jws: string, verifyCert: string): Promise<JWS> {\n\tif (!jws) throw new Error(\"Missing JWS data.\");\n\tif (!verifyCert) throw new Error(\"Missing cert to verify JWS payload.\");\n\n\t// TODO: can be further optimized by caching key in memory instead of regenerating each time\n\tconst jwsKey = await jose.JWK.asKey(verifyCert, \"pem\");\n\n\treturn jose.JWS.createVerify(jwsKey).verify(jws);\n}\n","import axios, { AxiosInstance, AxiosProxyConfig, AxiosRequestConfig } from \"axios-https-proxy-fix\";\nimport * as url from \"url\";\nimport { redactNricfinInString } from \"../util/RedactorUtil\";\n\nexport const createClient = (requestConfig: AxiosRequestConfig = {}): AxiosInstance => {\n\t// Note: Due to axios not being able to automatically pick up proxy env vars\n\t// correctly, we have manually set the proxy config here.\n\t// That alone is not enough to resolve the issue as there is a bug with axios\n\t// where requesting a https endpoint through Nectar's http proxy does not work\n\t// Hence, we have to use a forked library called axios-https-proxy-fix\n\t// Hopefully the next stable release of axios (post 0.18.0) will fix this\n\t// Also to note: tested 0.19.0-beta.1 version of axios and still encountering proxy errors\n\tconst proxyConfig = getProxyConfig();\n\trequestConfig = proxyConfig ?\n\t\t{ proxy: proxyConfig, ...requestConfig }\n\t\t: requestConfig;\n\n\tconst instance = axios.create({\n\t\t...requestConfig,\n\t});\n\n\taddRequestLogs(instance);\n\taddResponseLogs(instance);\n\treturn instance;\n};\n\nconst getProxyConfig = (): AxiosProxyConfig => {\n\tconst proxyUrl = process.env.HTTPS_PROXY || process.env.https_proxy || process.env.HTTP_PROXY || process.env.http_proxy;\n\n\tif (proxyUrl) {\n\t\tconst parsed = url.parse(proxyUrl);\n\t\tconst [username, password] = parsed.auth.split(\":\");\n\t\treturn {\n\t\t\thost: parsed.hostname,\n\t\t\tport: parseInt(parsed.port, 10),\n\t\t\tauth: {\n\t\t\t\tusername,\n\t\t\t\tpassword,\n\t\t\t},\n\t\t};\n\t}\n\n\treturn null;\n};\n\nconst addRequestLogs = (instance: AxiosInstance) => {\n\tinstance.interceptors.request.use((request) => {\n\t\tif (!!request) {\n\t\t\tlog(`Requesting ${request.method} : ${redactNricfinInString(request.url)}`);\n\t\t}\n\t\treturn request;\n\t}, (error) => {\n\t\tlog(`Error occurred while making a request ${error.message}`, error);\n\t\treturn Promise.reject(error);\n\t});\n};\n\nconst addResponseLogs = (instance: AxiosInstance) => {\n\tinstance.interceptors.response.use((response) => {\n\t\tif (!!response) {\n\t\t\tlog(`Responded ${response.config.method}  : ${redactNricfinInString(response.config.url)}`);\n\t\t}\n\t\treturn response;\n\t}, (error) => {\n\t\tif (!!error.response) {\n\t\t\tlog(`Error occurred while responding to request ${error.response.config.method} :\n\t\t\t${redactNricfinInString(error.response.config.url)}`, error);\n\t\t} else {\n\t\t\tlog(`Error occurred while responding to request`, error);\n\t\t}\n\t\treturn Promise.reject(error);\n\t});\n};\n\nconst log = (message?: any, ...optionalParams: any[]) => {\n\t// tslint:disable-next-line:no-console\n\tconsole.log(message, optionalParams);\n};\n","import { mrPRDaddyPerfect } from \"./mrPRDaddyPerfect\";\nimport { mrSGDaddyChildIsOld } from \"./mrSGDaddyChildIsOld\";\nimport { mrSGDaddyChildNone } from \"./mrSGDaddyChildNone\";\nimport { mrSGDaddyLongNames } from \"./mrSGDaddyLongNames\";\nimport { mrSGDaddyManyChildren } from \"./mrSGDaddyManyChildren\";\nimport { mrPreschoolRegister } from \"./mrSGPreschoolRegister\";\nimport { mrSGDaddyMissingFields } from \"./mrSGDaddyMissingFields\";\nimport { mrSGDaddyMissingUneditableFields } from \"./mrSGDaddyMissingUneditableFields\";\nimport { mrPRDaddyOneChild } from \"./mrPRDaddyOneChild\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { mrsMYMommyPerfect } from \"./mrsMYMommyPerfect\";\nimport { mrsSGMommyPerfect } from \"./mrsSGMommyPerfect\";\nimport { mrMYDaddyPerfect } from \"./mrMYDaddyPerfect\";\n\n/**\n * Exhaustive list of our MyInfo archetype profiles\n */\nexport const profiles = [\n\tmrSGDaddyPerfect,\n\tmrsSGMommyPerfect,\n\tmrPRDaddyPerfect,\n\tmrsMYMommyPerfect,\n\tmrSGDaddyChildNone,\n\tmrPRDaddyOneChild,\n\tmrSGDaddyChildIsOld,\n\tmrSGDaddyManyChildren,\n\tmrPreschoolRegister,\n\tmrSGDaddyLongNames,\n\tmrSGDaddyMissingFields,\n\tmrSGDaddyMissingUneditableFields,\n\tmrMYDaddyPerfect,\n];\n","module.exports = require(\"moment\");","import * as MyInfo from \"./myinfo\";\nimport * as Singpass from \"./singpass\";\n\nexport { MyInfo, Singpass };\n","export {\n\tMyInfoHelper as Helper, MyInfoHelperConstructor as HelperConstructor,\n\tMyInfoRequest as Request, MyInfoRequestConstructor as MyInfoRequestConstructor,\n} from \"./helper\";\n\nimport * as Fake from \"./fake\";\nexport { Fake };\n\nexport { AddressLocal, ChildBirthRecord, Person, PhoneNumLocal } from \"./domain\";\n","import * as request from \"request\";\nimport { Person } from \"../domain\";\n\nexport interface IMyInfoHelper {\n\tgetPersonData: <K extends keyof Person>(uinfin: string) => Promise<Pick<Person, K>>;\n}\n\nexport interface IMyInfoRequest {\n\tget: (\n\t\turi: string,\n\t\tparams?: { [key: string]: any },\n\t\tbearer?: string,\n\t) => Promise<request.RequestResponse>;\n\tpostForm: (\n\t\turi: string,\n\t\tformData?: { [key: string]: any },\n\t\tbearer?: string,\n\t) => Promise<request.RequestResponse>;\n}\n\n\nexport * from \"./myinfo-helper\";\nexport * from \"./myinfo-request\";\n","import { AxiosResponse } from \"axios-https-proxy-fix\";\nimport * as _ from \"lodash\";\n\nimport { MyInfoRequest } from \"./myinfo-request\";\nimport { Person } from \"../domain\";\nimport { MyInfoRequestConstructor } from \"./myinfo-request\";\nimport { decryptJWE } from \"../../util/JweUtil\";\nimport { IMyInfoHelper } from \"./index\";\n\nexport interface MyInfoHelperConstructor {\n\tattributes: ReadonlyArray<string>;\n\tclientID: string;\n\tpersonBasicURL: string;\n\tsingpassEserviceID: string;\n\tkeyToDecryptJWE: string;\n\tapexSigningURL: string;\n\tapexPrivateCert: string;\n\tapexPrivateCertPass: string;\n}\n\nexport class MyInfoHelper implements IMyInfoHelper {\n\n\tprivate myInfoRequest: MyInfoRequest;\n\n\tprivate readonly attributes: ReadonlyArray<string>;\n\tprivate readonly clientID: string;\n\tprivate readonly personBasicURL: string;\n\tprivate readonly singpassEserviceID: string;\n\tprivate readonly keyToDecryptJWE: string;\n\n\tpublic constructor(props: MyInfoHelperConstructor) {\n\t\tif (_.isEmpty(props.attributes)) {\n\t\t\tthrow new Error(\"Attribute list must contain values\");\n\t\t}\n\t\tthis.attributes = props.attributes;\n\t\tthis.clientID = props.clientID;\n\t\tthis.personBasicURL = props.personBasicURL;\n\t\tthis.singpassEserviceID = props.singpassEserviceID;\n\t\tthis.keyToDecryptJWE = props.keyToDecryptJWE;\n\n\t\tconst requestProps: MyInfoRequestConstructor = {\n\t\t\trealm: props.apexSigningURL,\n\t\t\tappId: props.clientID,\n\t\t\tprivateKeyContent: props.apexPrivateCert,\n\t\t\tprivateKeyPassword: props.apexPrivateCertPass,\n\t\t};\n\t\tthis.myInfoRequest = new MyInfoRequest(requestProps);\n\t}\n\n\t/**\n\t * Obtain person data using uinfin.\n\t * In the generic K, pass in the list of string literal of the attributes you expect to get back.\n\t * getPersonData will return an object with only the properties matching the keys.\n\t * e.g. when K = \"name\" | \"email\", getPersonData returns an object looking like { name, email }\n\t */\n\tpublic getPersonData = async<K extends keyof Person>(uinfin: string): Promise<Pick<Person, K>> => {\n\t\tconst url = `${this.personBasicURL}/${uinfin}`;\n\t\tconst params = {\n\t\t\tclient_id: this.clientID,\n\t\t\tsingpassEserviceId: this.singpassEserviceID,\n\t\t\tattributes: _.join(this.attributes, \",\"),\n\t\t};\n\n\t\tlet response: AxiosResponse;\n\t\ttry {\n\t\t\tresponse = await this.myInfoRequest.get(url, params);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error requesting for person data (JWE) from MyInfo\", error);\n\t\t\tthrow error;\n\t\t}\n\n\t\ttry {\n\t\t\t// Decrypt person data\n\t\t\tconst encryptedPersonJWE = response.data;\n\t\t\tconst jwe = await decryptJWE(encryptedPersonJWE, this.keyToDecryptJWE);\n\t\t\tconst personData = JSON.parse(jwe.payload.toString());\n\n\t\t\tif (personData === undefined || personData == null) {\n\t\t\t\tthrow new Error(\"Person data cannot be null\");\n\t\t\t}\n\n\t\t\treturn personData;\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error verifying person data from MyInfo\", error);\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n","let displayWarnings = true;\n\nexport function disableMissingEnvWarnings() {\n\tdisplayWarnings = false;\n}\n\nexport function getValueFromEnv(key: string, defaultValue?: string): string {\n\tconst value = !!process.env[key] ? process.env[key].trim() : defaultValue;\n\tif (!value && displayWarnings) {\n\t\tconsole.warn(`Configuration key not found or empty: ${key}`);\n\t}\n\treturn value;\n}\n\nexport function getValueFromEnvWithoutWarn(key: string, defaultValue?: string): string {\n\tconst value = !!process.env[key] ? process.env[key].trim() : defaultValue;\n\treturn value;\n}\n\nexport function getIntValueFromEnv(key: string, defaultValue: number): number {\n\tconst stringValue = getValueFromEnv(key, null);\n\tif (!stringValue) {\n\t\treturn defaultValue;\n\t}\n\n\tconst intValue = parseInt(stringValue, 10);\n\tif (isNaN(intValue)) {\n\t\tif (displayWarnings) {\n\t\t\tconsole.warn(`Configuration ${key} is not a valid integer: ${stringValue}`);\n\t\t}\n\t\treturn defaultValue;\n\t}\n\n\treturn intValue;\n}\n\n\nexport function getBooleanValueFromEnv(key: string, defaultValue: boolean = false): boolean {\n\tconst stringValue = getValueFromEnv(key, null);\n\tif (!stringValue) {\n\t\treturn defaultValue;\n\t}\n\n\tif (stringValue !== \"true\" && stringValue !== \"false\") {\n\t\tconsole.warn(`Configuration ${key} is not a valid boolean: ${stringValue}`);\n\t}\n\n\treturn stringValue === \"true\";\n}\n","import * as isBase64 from \"is-base64\";\n\n\nexport function replaceLineBreaks(input: string): string {\n\tif (!input) {\n\t\treturn input;\n\t}\n\n\treturn input.replace(/\\\\n/g, \"\\n\");\n}\n\nexport function isBase64Valid(test: string): boolean {\n\treturn isBase64(test, { paddingRequired: false });\n}\n","module.exports = require(\"is-base64\");","declare var global: any;\n\n/**\n * @returns Whether the code is currently running in Jest or not\n */\nexport function isTest(): boolean {\n\treturn global.describe && global.it;\n}\n","import * as _ from \"lodash\";\nimport { ApiSigningUtil } from \"node-apex-api-security\";\n\nexport enum HttpMethod {\n\tGET = \"GET\",\n\tPOST = \"POST\",\n}\n\nexport function generateAuthorizationHeader(\n\trealm: string,\n\tauthPrefix: string,\n\thttpMethod: HttpMethod,\n\turl: string,\n\tappId: string,\n\tformJson: any,\n\tprivateKeyContent: string,\n\tprivateKeyPassword: string,\n\tbearer?: string,\n\tnonce?: string,\n\ttimestamp?: number): string {\n\t// const eRealm = _.replace(realm, \".api.gov.sg\", \".e.api.gov.sg\");\n\tconst eURL = _.replace(url, \".api.gov.sg\", \".e.api.gov.sg\");\n\n\tconst rsaHeader = ApiSigningUtil.getSignatureToken({\n\t\tauthPrefix,\n\t\tappId,\n\t\turlPath: eURL,\n\t\thttpMethod,\n\t\trealm,\n\t\tkeyString: privateKeyContent,\n\t\tpassphrase: privateKeyPassword,\n\t\tqueryString: formJson,\n\t\tnonce,\n\t\ttimestamp,\n\t});\n\n\tif (bearer && bearer.length > 0) {\n\t\treturn `${rsaHeader}, Bearer ${bearer}`;\n\t} else {\n\t\treturn rsaHeader;\n\t}\n}\n","module.exports = require(\"node-apex-api-security\");","module.exports = require(\"node-jose\");","module.exports = require(\"axios-https-proxy-fix\");","module.exports = require(\"url\");","export const redactNricfinInString = (input: string): string => {\n\tconst indexOfNric = getIndexOfNricInString(input);\n\tif (indexOfNric !== -1) {\n\t\tconst nric = input.substr(indexOfNric, 9);\n\t\tconst redactedNric = redactNricfin(nric);\n\n\t\treturn input.replace(nric, redactedNric);\n\t}\n\n\treturn input;\n};\n\nexport const redactNricfin = (nricfin: string): string => {\n\tif (nricfin && isValidNricfin(nricfin)) {\n\t\tconst firstThreeDigits = nricfin.substring(1, 4);\n\t\treturn nricfin.replace(firstThreeDigits, \"***\");\n\t}\n\n\treturn nricfin;\n};\n\nconst isValidNricfin = (value) => {\n\tconst result = /[STFG]\\d{7}[A-Z]/i.exec(value);\n\treturn result;\n};\n\nconst getIndexOfNricInString = (value): number => {\n\tconst result = /[STFG]\\d{7}[A-Z]/i.exec(value);\n\tif (!!result) {\n\t\treturn result.index;\n\t}\n\treturn -1;\n};\n\n","export { FakeMyInfoHelper as Helper, IFakeMyInfoHelper as IHelper, MockParams } from \"./fake-helper\";\nexport { FakeMyInfoRequest as Request } from \"./fake-request\";\nexport * from \"./profiles/fake-profiles\";\nexport { ProfileArchetype } from \"./profiles/fake-profile\";\n","import * as _ from \"lodash\";\n\nimport { Person } from \"../domain\";\nimport { ProfileArchetype } from \"./profiles/fake-profile\";\nimport { profiles } from \"./profiles/fake-profiles\";\n\nexport interface MockParams {\n\tarchetype: ProfileArchetype;\n\tmarital?: string;\n\tmarriagedate?: string;\n\tmarriagecertno?: string;\n\tcountryofmarriage?: string;\n\toccupation?: string;\n\toccupationfreeform?: string;\n\tdob?: string;\n}\n\nexport interface IFakeMyInfoHelper {\n\tgetPersonData: (mockParams: MockParams) => Person;\n}\n\nexport class FakeMyInfoHelper implements IFakeMyInfoHelper {\n\t/**\n\t * @param attributes attributes to return in the MyInfoPerson in getPersonData\n\t */\n\tpublic constructor(\n\t\tprivate readonly attributes?: ReadonlyArray<string>,\n\t) { }\n\n\t/**\n\t * fake getPersonData\n\t * @param input the mock profile parameters.\n\t * See FakeMyInfoPersonArchetypes for the actual person.\n\t */\n\tpublic getPersonData = (mockParams: MockParams): Person => {\n\t\tconst mockProfile = profiles.find((profile) => profile.name === mockParams.archetype);\n\t\tif (!mockProfile)\n\t\t\treturn null;\n\n\t\tconst myinfoPerson = {\n\t\t\t...mockProfile.generate(),\n\t\t};\n\n\t\tif (!_.isEmpty(mockParams.marital)) {\n\t\t\tmyinfoPerson.marital.value = mockParams.marital;\n\t\t}\n\n\t\tif (!_.isEmpty(mockParams.marriagedate)) {\n\t\t\tmyinfoPerson.marriagedate.value = mockParams.marriagedate;\n\t\t}\n\n\t\tif (!_.isEmpty(mockParams.marriagecertno)) {\n\t\t\tmyinfoPerson.marriagecertno.value = mockParams.marriagecertno;\n\t\t}\n\n\t\tif (!_.isEmpty(mockParams.countryofmarriage)) {\n\t\t\tmyinfoPerson.countryofmarriage.value = mockParams.countryofmarriage;\n\t\t}\n\n\t\tif (!_.isEmpty(mockParams.dob)) {\n\t\t\tmyinfoPerson.dob.value = mockParams.dob;\n\t\t}\n\n\t\tif (!_.isEmpty(mockParams.occupation)) {\n\t\t\tmyinfoPerson.occupation.value = mockParams.occupation;\n\t\t} else {\n\t\t\tif (!_.isEmpty(mockParams.occupationfreeform)) {\n\t\t\t\tmyinfoPerson.occupation.value = \"\";\n\t\t\t\tmyinfoPerson.occupation.desc = mockParams.occupationfreeform;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.attributes) {\n\t\t\treturn myinfoPerson;\n\t\t}\n\n\t\treturn filterThroughMyInfoAttributes(myinfoPerson, this.attributes);\n\t}\n}\n\n/**\n * @description Returns new fake person with only the attributes listed in attributes param. Does not mutate.\n * @param person fake MyInfo person\n * @param attributes array of attributes to filter for\n */\nfunction filterThroughMyInfoAttributes(person: Person, attributes: ReadonlyArray<string>): Person {\n\tconst attrs = new Set(attributes);\n\n\treturn _.toPairs(person)\n\t\t.filter(([k]) => attrs.has(k))\n\t\t.reduce((accumulator, [k, v]) => ({ ...accumulator, [k]: v }), {} as Person);\n}\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\nconst id = \"S2599302J\";\nconst name = ProfileArchetype.MR_PR_DADDY_PERFECT;\n\nexport const mrPRDaddyPerfect: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.nationality.value = \"AD\";\n\t\tprofile.residentialstatus.value = \"P\";\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { ChildrenRecords } from \"./childbirthRecords\";\n\nconst id = \"T2446959F\";\nconst name = ProfileArchetype.MR_SG_DADDY_CHILD_IS_OLD;\n\nexport const mrSGDaddyChildIsOld: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.childrenbirthrecords = [ChildrenRecords.childSuperOld];\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\nconst id = \"T2446959F\";\nconst name = ProfileArchetype.MR_SG_DADDY_CHILD_NONE;\n\nexport const mrSGDaddyChildNone: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.childrenbirthrecords = [];\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { ChildrenRecords } from \"./childbirthRecords\";\n\nconst id = \"T2446959F\";\nconst name = ProfileArchetype.MR_SG_DADDY_LONG_NAMES;\n\nexport const mrSGDaddyLongNames: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tconst longName = \"Princess Aura Nurr Ermily Amara Auliya Bidadari S/O (Nawal), El@Björk' María-Jose!\";\n\t\tprofileName = _.isEmpty(profileName) ? longName : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.childrenbirthrecords = _.values(ChildrenRecords);\n\t\tprofile.childrenbirthrecords[0].name = longName + \" JR\";\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { ChildrenRecords } from \"./childbirthRecords\";\n\n\nconst id = \"T2446959F\";\nconst name = ProfileArchetype.MR_SG_DADDY_MANY_CHILDREN;\n\nexport const mrSGDaddyManyChildren: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.childrenbirthrecords = _.values(ChildrenRecords);\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport * as moment from \"moment\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { ChildBirthRecord } from \"../../domain\";\n\n\nconst id = \"S0350934F\";\nconst name = ProfileArchetype.MR_SG_PRESCHOOL_CHILDREN;\n\nexport const mrPreschoolRegister: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.childrenbirthrecords = _.values(ChildrenRecords);\n\n\t\treturn profile;\n\t},\n};\n\nconst formatDateToString = (date?: moment.Moment): string => {\n\tif (date) {\n\t\treturn date.format(\"YYYY-MM-DD\").toString();\n\t}\n\treturn moment().format(\"YYYY-MM-DD\").toString();\n};\n\n// the children here have birthcertno related to the preschool interest registration mock\nconst c1 = {\n\tbirthcertno: \"T1639540J\",\n\tname: \"Child w level not offered\",\n\tdob: formatDateToString(moment().subtract(2, \"years\")),\n} as ChildBirthRecord;\n\nconst c2 = {\n\tbirthcertno: \"T1717003H\",\n\tname: \"Child w ineligible\",\n\tdob: formatDateToString(moment().subtract(2, \"years\")),\n} as ChildBirthRecord;\n\nconst c3 = {\n\tbirthcertno: \"T1728256A\",\n\tname: \"Child w registered\",\n\tdob: formatDateToString(moment().subtract(3, \"years\")),\n} as ChildBirthRecord;\n\nconst c4 = {\n\tbirthcertno: \"T1766863Z\",\n\tname: \"Child w nothing\",\n\tdob: formatDateToString(moment().subtract(4, \"years\")),\n} as ChildBirthRecord;\n\nconst c5 = {\n\tbirthcertno: \"T1783246D\",\n\tname: \"Child2 w level not offered \",\n\tdob: formatDateToString(moment().subtract(5, \"years\")),\n} as ChildBirthRecord;\n\nconst c6 = {\n\tbirthcertno: \"T1790160A\",\n\tname: \"Child2 w ineligible\",\n\tdob: formatDateToString(moment().subtract(6, \"years\")),\n} as ChildBirthRecord;\n\nexport const ChildrenRecords = {\n\tc1, c2, c3, c4, c5, c6,\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\n\nconst id = \"S8779834H\";\nconst name = ProfileArchetype.MR_SG_DADDY_MISSING_FIELDS;\n\nexport const mrSGDaddyMissingFields: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.hanyupinyinname.value = \"\";\n\t\tprofile.aliasname.value = null;\n\t\tprofile.hanyupinyinaliasname.value = \"\";\n\t\tprofile.secondaryrace.value = \"\";\n\t\tprofile.residentialstatus.value = \"U\";\n\t\tprofile.homeno.nbr = \"\";\n\t\tprofile.marriagecertno.value = \"\";\n\t\tprofile.countryofmarriage.value = \"\";\n\t\tprofile.childrenbirthrecords = profile.childrenbirthrecords.slice(0, 1);\n\t\tprofile.edulevel.value = \"0\";\n\t\tprofile.occupation.desc = \"SPACE PIRATE\";\n\t\tprofile.occupation.value = \"\";\n\t\tprofile.cpfcontributions.cpfcontribution = profile.cpfcontributions.cpfcontribution.slice(0, 1);\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\n\nconst id = \"S8974352D\";\nconst name = ProfileArchetype.MR_SG_DADDY_MISSING_UNEDITABLE_FIELDS;\n\nexport const mrSGDaddyMissingUneditableFields: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\n\t\t// Uneditable field\n\t\tprofile.nationality.value = \"\";\n\t\tprofile.dob.value = \"\";\n\n\t\tprofile.regadd.block = \"\";\n\t\tprofile.regadd.building = \"\";\n\t\tprofile.regadd.classification = \"\";\n\t\tprofile.regadd.country = \"\";\n\t\tprofile.regadd.floor = \"\";\n\t\tprofile.regadd.postal = \"\";\n\t\tprofile.regadd.street = \"\";\n\t\tprofile.regadd.unit = \"\";\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { ChildrenRecords } from \"./childbirthRecords\";\n\nconst id = \"S7936715Z\";\nconst name = ProfileArchetype.MR_PR_DADDY_ONE_CHILD;\n\nexport const mrPRDaddyOneChild: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.residentialstatus.value = \"P\";\n\n\t\tprofile.childrenbirthrecords = [ChildrenRecords.childYoungest];\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\n\nconst id = \"F5994458N\";\nconst name = ProfileArchetype.MRS_MY_MOMMY_PERFECT;\n\nexport const mrsMYMommyPerfect: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.sex.value = \"F\";\n\t\tprofile.nationality.value = \"MY\";\n\t\tprofile.birthcountry.value = \"MY\";\n\t\tprofile.residentialstatus.value = \"A\";\n\t\tprofile.passportnumber.value = \"A00000000\";\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\n\nconst id = \"T2446959F\";\nconst name = ProfileArchetype.MRS_SG_MOMMY_PERFECT;\n\nexport const mrsSGMommyPerfect: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.sex.value = \"F\";\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\n\nconst id = \"F5994458N\";\nconst name = ProfileArchetype.MR_MY_DADDY_PERFECT;\n\nexport const mrMYDaddyPerfect: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.sex.value = \"M\";\n\t\tprofile.nationality.value = \"MY\";\n\t\tprofile.birthcountry.value = \"MY\";\n\t\tprofile.residentialstatus.value = \"A\";\n\t\tprofile.passportnumber.value = \"A00000000\";\n\n\t\treturn profile;\n\t},\n};\n","import * as request from \"request\";\nimport { IMyInfoRequest } from \"../helper\";\n\nexport class FakeMyInfoRequest implements IMyInfoRequest {\n\tconstructor() {\n\t}\n\n\tpublic async get(\n\t\texpectedResponse: any,\n\t): Promise<request.RequestResponse> {\n\t\treturn expectedResponse;\n\t}\n\n\tpublic async postForm(\n\t\texpectedResponse: any,\n\t): Promise<request.RequestResponse> {\n\t\treturn expectedResponse;\n\t}\n}\n","export * from \"./singpass-helper\";\n","import * as querystringUtil from \"querystring\";\nimport { createClient } from \"../client\";\nimport { JweUtil } from \"../util\";\nimport { AxiosInstance, AxiosRequestConfig } from \"axios-https-proxy-fix\";\n\nexport enum SessionRefreshResult {\n\tSUCCESS = \"SUCCESS\",\n\tSINGPASS_ERROR = \"SINGPASS_ERROR\",\n\tINVALID_SESSION_ID = \"INVALID_SESSION_ID\",\n}\n\nexport enum SessionLogoutResult {\n\tSUCCESS = \"SUCCESS\",\n\tSINGPASS_ERROR = \"SINGPASS_ERROR\",\n}\n\nexport interface TokenResponse {\n\taccess_token: string;\n\trefresh_token: string;\n\tid_token: string;\n\ttoken_type: string;\n\texpires_in: number;\n\tscope: string;\n}\n\nexport interface TokenPayload {\n\trt_hash: string;\n\tnonce?: string;\n\tiat: number;\n\tiss: string;\n\tat_hash: string;\n\t// sub contains user's NRIC and UUID: s=S1234567A,u=f19fdf4c-f57b-40b5-a8e0-6fb6eef640e3\n\tsub: string;\n\texp: number;\n\taud: string;\n\tamr: string[];\n}\n\nexport interface OidcHelperConstructor {\n\tauthorizationUrl: string;\n\tlogoutUrl: string;\n\ttokenUrl: string;\n\tclientID: string;\n\tclientSecret: string;\n\tredirectUri: string;\n\tjweDecryptKey: string;\n\tjwsVerifyKey: string;\n}\n\nexport class OidcHelper {\n\n\tprivate SINGPASS_SESSION_COOKIE_NAME = \"PD-S-SESSION-ID\";\n\tprivate axiosClient: AxiosInstance = createClient({\n\t\ttimeout: 10000,\n\t});\n\n\tprivate authorizationUrl: string;\n\tprivate logoutUrl: string;\n\tprivate tokenUrl: string;\n\tprivate clientID: string;\n\tprivate clientSecret: string;\n\tprivate redirectUri: string;\n\tprivate jweDecryptKey: string;\n\tprivate jwsVerifyKey: string;\n\n\n\tconstructor(props: OidcHelperConstructor) {\n\t\tthis.authorizationUrl = props.authorizationUrl;\n\t\tthis.logoutUrl = props.logoutUrl;\n\t\tthis.tokenUrl = props.tokenUrl;\n\t\tthis.clientID = props.clientID;\n\t\tthis.clientSecret = props.clientSecret;\n\t\tthis.redirectUri = props.redirectUri;\n\t\tthis.jweDecryptKey = props.jweDecryptKey;\n\t\tthis.jwsVerifyKey = props.jwsVerifyKey;\n\t}\n\n\tpublic constructAuthorizationUrl = (\n\t\tstate: string,\n\t\tnonce?: string,\n\t): string => {\n\t\tconst queryParams = {\n\t\t\tstate,\n\t\t\t...(nonce ? { nonce } : {}),\n\t\t\tredirect_uri: this.redirectUri,\n\t\t\tscope: \"openid\",\n\t\t\tclient_id: this.clientID,\n\t\t\tresponse_type: \"code\",\n\n\t\t};\n\t\tconst queryString = querystringUtil.stringify(queryParams);\n\t\treturn `${this.authorizationUrl}?${queryString}`;\n\t}\n\n\t/**\n\t * Get tokens from Singpass endpoint. Note: This will fail if not on an IP whitelisted by SP.\n\t * Use getIdTokenPayload on returned Token Response to get the token payload\n\t */\n\tpublic getTokens = async (authCode: string, axiosRequestConfig?: AxiosRequestConfig): Promise<TokenResponse> => {\n\t\tconst params = {\n\t\t\tgrant_type: \"authorization_code\",\n\t\t\tcode: authCode,\n\t\t\tclient_id: this.clientID,\n\t\t\tclient_secret: this.clientSecret,\n\t\t\tredirect_uri: this.redirectUri,\n\t\t};\n\t\tconst body = querystringUtil.stringify(params);\n\n\t\tconst config = {\n\t\t\theaders: { \"content-type\": \"application/x-www-form-urlencoded\" },\n\t\t\t...axiosRequestConfig,\n\t\t};\n\t\tconst response = await this.axiosClient.post(this.tokenUrl, body, config);\n\t\tif (!response.data.id_token) {\n\t\t\tconsole.error(\"Failed to get ID token: invalid response data\", response.data);\n\t\t\tthrow new Error(\"Failed to get ID token\");\n\t\t}\n\t\treturn response.data;\n\t}\n\n\t/**\n\t * Decrypts the ID Token JWT inside the TokenResponse to get the payload\n\t * Use extractNricAndUuidFromPayload on the returned Token Payload to get the NRIC and UUID\n\t */\n\tpublic async getIdTokenPayload(tokens: TokenResponse): Promise<TokenPayload> {\n\t\ttry {\n\n\t\t\tconst { id_token } = tokens;\n\t\t\tconst decryptedJwe = await JweUtil.decryptJWE(id_token, this.jweDecryptKey);\n\t\t\tconst jwsPayload = decryptedJwe.payload.toString();\n\t\t\tconst verifiedJws = await JweUtil.verifyJWS(jwsPayload, this.jwsVerifyKey);\n\t\t\treturn JSON.parse(verifiedJws.payload.toString()) as TokenPayload;\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to get token payload\", e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the nric and uuid from the token payload\n\t */\n\tpublic extractNricAndUuidFromPayload(payload: TokenPayload): { nric: string, uuid: string } {\n\t\tconst { sub } = payload;\n\n\t\tif (sub) {\n\t\t\tconst extractionRegex = /s=([STFG]\\d{7}[A-Z]).*,u=(.*)/i;\n\t\t\tconst matchResult = sub.match(extractionRegex);\n\n\t\t\tif (!matchResult) {\n\t\t\t\tthrow Error(\"Token payload sub property is invalid, does not contain valid NRIC and uuid string\");\n\t\t\t}\n\n\t\t\tconst nric = matchResult[1];\n\t\t\tconst uuid = matchResult[2];\n\n\t\t\treturn { nric, uuid };\n\t\t}\n\n\t\tthrow Error(\"Token payload sub property is not defined\");\n\t}\n\n\t/**\n\t * [DEPRECATED] Refresh the Singpass session, using a valid session id (that is retrieved from Singpass domain cookie)\n\t * @param sessionId the session id extracted from PD-S-SESSION-ID in the user agent\n\t * @param state state that will be passed to the your redirect uri from this refresh call. defaults to \"dummyState\"\n\t * @returns INVALID_SESSION_ID - the sessionId param is no longer valid\n\t * @returns SINGPASS_ERROR - the call to Singpass server to refresh is not successful\n\t * @returns SUCCESS - refresh sessionId successfully\n\t */\n\tpublic async refreshSession(sessionId: string, state: string = \"dummyState\"): Promise<SessionRefreshResult> {\n\t\tconst authorizationUrl = this.constructAuthorizationUrl(state);\n\t\tconst requestConfig = { headers: { Cookie: `${this.SINGPASS_SESSION_COOKIE_NAME}=${sessionId}` } };\n\t\ttry {\n\t\t\tconst result = await this.axiosClient.get(authorizationUrl, requestConfig);\n\t\t\tif (result.request.res.responseUrl.includes(\"saml.singpass.gov.sg\")) {\n\t\t\t\tconsole.warn(`Attempted to refresh session with invalid session ID ${sessionId}`);\n\t\t\t\treturn SessionRefreshResult.INVALID_SESSION_ID;\n\t\t\t}\n\t\t\treturn SessionRefreshResult.SUCCESS;\n\t\t} catch (e) {\n\t\t\tconsole.warn(`Singpass Error while attempting to refresh session for sessionId: ${sessionId}\\nError:`, e);\n\t\t\treturn SessionRefreshResult.SINGPASS_ERROR;\n\t\t}\n\t}\n\n\n\n\t/**\n\t * [DEPRECATED] Log user out of Singpass, using a valid session id (that is retrieved from Singpass domain cookie)\n\t * @param sessionId the session id extracted from PD-S-SESSION-ID in the user agent\n\t */\n\tpublic async logoutOfSession(sessionId: string): Promise<SessionLogoutResult> {\n\t\tconst requestConfig = { headers: { Cookie: `${this.SINGPASS_SESSION_COOKIE_NAME}=${sessionId}` } };\n\t\ttry {\n\t\t\tawait this.axiosClient.get(this.logoutUrl, requestConfig);\n\t\t\treturn SessionLogoutResult.SUCCESS;\n\t\t} catch (e) {\n\t\t\tconsole.warn(\"Singpass Error while attempting to logout of Singpass session\", e);\n\t\t\treturn SessionLogoutResult.SINGPASS_ERROR;\n\t\t}\n\t}\n\n\tpublic _testExports = {\n\t\tsingpassClient: this.axiosClient,\n\t};\n}\n","module.exports = require(\"querystring\");"],"sourceRoot":""}